karthikcottur@dhcp-10-8-004-195 raft %  go test -run TestRejoin3B
Test (3B): rejoin of partitioned leader ...
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:35 si: 2, index1: -1, isLeader: false
2025/02/05 13:57:35 Server 0 started election with Term 1
2025/02/05 13:57:35 Got vote request at server 1 from 0
2025/02/05 13:57:35 Got vote request at server 2 from 0
2025/02/05 13:57:35 Enter request vote lock at server 1 from 0
2025/02/05 13:57:35 Candidate has higher Term 0 at server 1
2025/02/05 13:57:35 Candidate last log term: 0, candidate last log index: 0
2025/02/05 13:57:35 last log term: 0, last log index: 0
2025/02/05 13:57:35 Server 1 granted vote to candidate 0
2025/02/05 13:57:35 Enter request vote lock at server 2 from 0
2025/02/05 13:57:35 Candidate has higher Term 0 at server 2
2025/02/05 13:57:35 Candidate last log term: 0, candidate last log index: 0
2025/02/05 13:57:35 last log term: 0, last log index: 0
2025/02/05 13:57:35 Server 2 granted vote to candidate 0
2025/02/05 13:57:35 Server 0 became leader with Term 1
2025/02/05 13:57:36 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:36 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:36 si: 2, index1: 1, isLeader: true
2025/02/05 13:57:36 Leader 0 prepared Entries [{1 101}] for server 1 with prevlogindex 0 and prevlogterm 0
2025/02/05 13:57:36 Leader 0 prepared Entries [{1 101}] for server 2 with prevlogindex 0 and prevlogterm 0
2025/02/05 13:57:36 Appending log entries [{1 101}] at server 1 from 0
2025/02/05 13:57:36 Appending log entries [{1 101}] at server 2 from 0
2025/02/05 13:57:36 Got successful reply at server 0 from 1
2025/02/05 13:57:36 Got successful reply at server 0 from 2
2025/02/05 13:57:36 Log while Applying state at server: 1, [{0 <nil>} {1 101}]
2025/02/05 13:57:36 lastApplied: 0, commitIndex: 1
2025/02/05 13:57:36 Applying state at server: 1, command: 101, command index: 1
2025/02/05 13:57:36 Log while Applying state at server: 0, [{0 <nil>} {1 101}]
2025/02/05 13:57:36 lastApplied: 0, commitIndex: 1
2025/02/05 13:57:36 Applying state at server: 0, command: 101, command index: 1
2025/02/05 13:57:36 Log while Applying state at server: 2, [{0 <nil>} {1 101}]
2025/02/05 13:57:36 lastApplied: 0, commitIndex: 1
2025/02/05 13:57:36 Applying state at server: 2, command: 101, command index: 1
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102}] for server 2 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102} {1 103} {1 104}] for server 2 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102} {1 103} {1 104}] for server 1 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102} {1 103}] for server 2 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102} {1 103}] for server 1 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102}] for server 1 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: -1, isLeader: false
2025/02/05 13:57:37 Leader 0 could not contact server 2
2025/02/05 13:57:37 Leader 0 prepared Entries [{1 102} {1 103} {1 104}] for server 2 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Server 2 started election with Term 2
2025/02/05 13:57:37 Got vote request at server 1 from 2
2025/02/05 13:57:37 Enter request vote lock at server 1 from 2
2025/02/05 13:57:37 Candidate has higher Term 2 at server 1
2025/02/05 13:57:37 Candidate last log term: 1, candidate last log index: 1
2025/02/05 13:57:37 last log term: 1, last log index: 1
2025/02/05 13:57:37 Server 1 granted vote to candidate 2
2025/02/05 13:57:37 Server 2 became leader with Term 2
2025/02/05 13:57:37 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:37 si: 1, index1: 2, isLeader: true
2025/02/05 13:57:37 Leader 2 prepared Entries [{2 103}] for server 1 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Leader 2 prepared Entries [{2 103}] for server 0 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:37 Appending log entries [{2 103}] at server 1 from 2
2025/02/05 13:57:37 Got successful reply at server 2 from 1
2025/02/05 13:57:37 Log while Applying state at server: 2, [{0 <nil>} {1 101} {2 103}]
2025/02/05 13:57:37 lastApplied: 1, commitIndex: 2
2025/02/05 13:57:37 Applying state at server: 2, command: 103, command index: 2
2025/02/05 13:57:38 Log while Applying state at server: 1, [{0 <nil>} {1 101} {2 103}]
2025/02/05 13:57:38 lastApplied: 1, commitIndex: 2
2025/02/05 13:57:38 Applying state at server: 1, command: 103, command index: 2
2025/02/05 13:57:39 si: 0, index1: -1, isLeader: false
2025/02/05 13:57:39 si: 2, index1: 5, isLeader: true
2025/02/05 13:57:39 Leader 0 prepared Entries [{1 102} {1 103} {1 104} {1 104}] for server 1 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:39 Leader 0 prepared Entries [{1 102} {1 103} {1 104} {1 104}] for server 2 with prevlogindex 1 and prevlogterm 1
2025/02/05 13:57:39 Server 1 started election with Term 3
2025/02/05 13:57:39 Got vote request at server 0 from 1
2025/02/05 13:57:39 Enter request vote lock at server 0 from 1
2025/02/05 13:57:39 Candidate has higher Term 1 at server 0
2025/02/05 13:57:39 Candidate last log term: 2, candidate last log index: 2
2025/02/05 13:57:39 last log term: 1, last log index: 5
2025/02/05 13:57:39 Server 0 granted vote to candidate 1
2025/02/05 13:57:39 Server 1 became leader with Term 3
2025/02/05 13:57:39 Log while Applying state at server: 0, [{0 <nil>} {1 101} {1 102} {1 103} {1 104} {1 104}]
2025/02/05 13:57:39 lastApplied: 1, commitIndex: 2
2025/02/05 13:57:39 Applying state at server: 0, command: 102, command index: 2
2025/02/05 13:57:39 0: log map[1:101]; server map[1:101 2:103]
2025/02/05 13:57:39 0: log map[1:101]; server map[1:101 2:103]
2025/02/05 13:57:39 apply error: commit index=2 server=0 102 != server=2 103
exit status 1
FAIL	6.5840/raft	4.191s
karthikcottur@dhcp-10-8-004-195 raft %